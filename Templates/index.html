<html>
  <head>
    <script type="text/javascript" src="/Content/js/smoothie.js"></script>
    <script type="text/javascript" src="/Content/js/jquery.min.js"></script>
  </head>

  <body>
    <canvas id="mycanvas" width="800" height="400"></canvas>

    <script type="text/javascript">
      $(document).ready(function () {
        function getData() {
          var num = $.ajax({
            url:      "/processes",
            async:    false,
          }).responseText;

          return parseFloat(num);
        }

        var smoothie = new SmoothieChart();
        smoothie.streamTo(document.getElementById("mycanvas"), 1000);

        var line1 = new TimeSeries();
        
        setInterval(function() {
          line1.append(new Date().getTime(), getData());
        }, 1000);
        
        smoothie.addTimeSeries(line1, { strokeStyle:'rgb(0, 255, 0)', 
                                        fillStyle:'rgba(0, 255, 0, 0.4)', 
                                        lineWidth:3 });

      });
    </script>
  </body>
</html>
